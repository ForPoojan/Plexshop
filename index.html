 <!DOCTYPE html>
<html>
<head>
  <title>Place Order</title>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script>
    window.onload = function () {
      emailjs.init("oMy1sqLbZSn4n9DMz");
    };
  </script>
  <style>
    :root {
      --bg: #121212;
      --text: #ffffff;
      --card: #1e1e1e;
    }
    [data-theme="light"] {
      --bg: #f0f0f0;
      --text: #000;
      --card: #fff;
    }

    body {
      margin: 0;
      font-family: sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 20px;
      transition: 0.3s;
    }

    .card {
      background: var(--card);
      padding: 25px;
      border-radius: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      width: 100%;
      max-width: 400px;
      margin-bottom: 20px;
    }

    input, textarea, select {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border-radius: 25px;
      border: 1px solid #ccc;
      background: var(--bg);
      color: var(--text);
    }

    button {
      width: 100%;
      padding: 12px;
      border: none;
      background: #007bff;
      color: white;
      font-size: 16px;
      border-radius: 25px;
      cursor: pointer;
    }

    .toggle-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--card);
      padding: 6px 12px;
      border-radius: 25px;
      display: flex;
      align-items: center;
    }

    .switch {
      position: relative;
      display: inline-block;
      width: 32px;
      height: 16px;
      margin-left: 8px;
    }

    .switch input { opacity: 0; width: 0; height: 0; }

    .slider {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc;
      border-radius: 20px;
      transition: .4s;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 10px; width: 10px;
      left: 3px; bottom: 3px;
      background-color: white;
      border-radius: 50%;
      transition: .4s;
    }

    input:checked + .slider {
      background-color: #007bff;
    }

    input:checked + .slider:before {
      transform: translateX(16px);
    }

    #statusModal {
      position: fixed;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      background: var(--card);
      padding: 25px;
      border-radius: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      display: none;
      z-index: 999;
      font-size: 16px;
      text-align: center;
    }

    #confirmation {
      display: none;
      width: 100%;
      max-width: 400px;
    }

    #confirmation .card {
      text-align: center;
    }

    #confirmation h2 {
      color: #4CAF50;
      margin-bottom: 10px;
    }

    #selectTitle {
      margin-bottom: 20px;
    }
  </style>
</head>
<body data-theme="dark">
  <h2 id="selectTitle">Select Your Order</h2>

  <div class="card" id="orderSelect">
    <select id="orderType" required>
      <option value="" disabled selected>Select an Order</option>
      <option value="Order 1">Order 1</option>
      <option value="Order 2">Order 2</option>
      <option value="Order 3">Order 3</option>
    </select>
    <button onclick="showForm()">Next</button>
  </div>

  <form class="card" id="orderForm" style="display: none;">
    <input type="text" id="userEmail" placeholder="Your Email" required>
    <input type="text" id="userPhone" placeholder="Your Phone" required>
    <textarea id="userAddress" placeholder="Your Address" rows="3" required></textarea>
    <button type="submit">Place Order</button>
  </form>

  <div id="statusModal"></div>

  <div id="confirmation">
    <div class="card">
      <h2>✅ Order Placed Successfully!</h2>
      <p>Thank you for your order. We’ve received your details and will contact you soon.</p>
    </div>
  </div>

  <!-- Theme toggle -->
  <div class="toggle-container">
    <span>Light</span>
    <label class="switch">
      <input type="checkbox" id="themeToggle">
      <span class="slider"></span>
    </label>
  </div>

  <script>
    const body = document.body;
    const toggle = document.getElementById("themeToggle");
    const form = document.getElementById("orderForm");
    const selectDiv = document.getElementById("orderSelect");
    const modal = document.getElementById("statusModal");
    const confirmation = document.getElementById("confirmation");
    const selectTitle = document.getElementById("selectTitle");

    let selectedOrder = "";

    toggle.checked = false;
    toggle.addEventListener("change", () => {
      body.setAttribute("data-theme", toggle.checked ? "light" : "dark");
    });

    function showForm() {
      const val = document.getElementById("orderType").value;
      if (val) {
        selectedOrder = val;
        selectDiv.style.display = "none";
        form.style.display = "block";
        selectTitle.style.display = "none";
      }
    }

    form.addEventListener("submit", function(e) {
      e.preventDefault();
      const email = document.getElementById("userEmail").value.trim();
      const phone = document.getElementById("userPhone").value.trim();
      const address = document.getElementById("userAddress").value.trim();

      if (!email.includes("@") || !email.includes(".")) {
        showModal("❌ Invalid email format");
        return;
      }

      showModal("⏳ Sending your order...");

      const params = {
        email: email,
        phone: phone,
        address: address,
        order: selectedOrder
      };

      emailjs.send("service_vzepjke", "template_0egvy8i", params)
        .then(() => {
          setTimeout(() => {
            hideAll();
            confirmation.style.display = "block";
          }, 1500);
        })
        .catch(() => {
          showModal("❌ Failed to send. Try again.");
        });
    });

    function showModal(msg) {
      modal.innerText = msg;
      modal.style.display = "block";
      setTimeout(() => {
        modal.style.display = "none";
      }, 3000);
    }

    function hideAll() {
      form.style.display = "none";
      selectDiv.style.display = "none";
      selectTitle.style.display = "none";
      modal.style.display = "none";
    }
  </script>
</body>
</html>
